-- Start of user code DB Name
-- TODO specify the name of database used
USE weblogng;
-- End of user code

-- Tables for Entity BlogEntry 

DROP TABLE IF EXISTS BLOG_ENTRY;
CREATE TABLE BLOG_ENTRY
(
	ID CHAR(32) NOT NULL,
	TITLE VARCHAR(255) NOT NULL,
	CREATION_DATE DATETIME NOT NULL,
	CONTENT VARCHAR(255) NOT NULL,
	-- |*|<-->1
	FK_USER_AUTHOR_USER_ID CHAR(32) UNIQUE NOT NULL,

	PRIMARY KEY (ID)
);

-- Tables for Entity Comment 

DROP TABLE IF EXISTS COMMENT;
CREATE TABLE COMMENT
(
	ID CHAR(32) NOT NULL,
	NAME VARCHAR(255) ,
	EMAIL VARCHAR(255) ,
	WEBSITE VARCHAR(255) ,
	CONTENT VARCHAR(255) ,
	CREATION_DATE DATETIME ,
	-- |*|<-->1
	FK_BLOG_ENTRY_IS_COMMENT_OF_ID CHAR(32) UNIQUE NOT NULL,

	PRIMARY KEY (ID)
);

-- Tables for Entity Tag 

DROP TABLE IF EXISTS TAG;
CREATE TABLE TAG
(
	ID CHAR(32) NOT NULL,
	NAME VARCHAR(255) ,
	PRIMARY KEY (ID)
);

-- |*|<-->*
DROP TABLE IF EXISTS TAG_BLOG_ENTRY;
CREATE TABLE TAG_BLOG_ENTRY
(
	TAG_ID CHAR(32) NOT NULL,
	BLOG_ENTRY_ID CHAR(32) NOT NULL,
	PRIMARY KEY (TAG_ID, BLOG_ENTRY_ID)
);
-- Tables for Entity Category 

DROP TABLE IF EXISTS CATEGORY;
CREATE TABLE CATEGORY
(
	ID CHAR(32) NOT NULL,
	NAME VARCHAR(255) ,
	DESCRIPTION VARCHAR(255) ,
	PRIMARY KEY (ID)
);

-- |*|<-->*
DROP TABLE IF EXISTS CATEGORY_BLOG_ENTRY;
CREATE TABLE CATEGORY_BLOG_ENTRY
(
	CATEGORY_ID CHAR(32) NOT NULL,
	BLOG_ENTRY_ID CHAR(32) NOT NULL,
	PRIMARY KEY (CATEGORY_ID, BLOG_ENTRY_ID)
);
-- Tables for Entity Admin 

DROP TABLE IF EXISTS ADMIN;
CREATE TABLE ADMIN
(
	FK_INHERITS_USER_ID CHAR(32) NOT NULL,
	PRIMARY KEY (FK_INHERITS_USER_ID)
);

-- Tables for Entity User 

DROP TABLE IF EXISTS USER;
CREATE TABLE USER
(
	ID CHAR(32) NOT NULL,
	EMAIL VARCHAR(255) NOT NULL,
	FIRST_NAME VARCHAR(255) NOT NULL,
	LAST_NAME VARCHAR(255) NOT NULL,
	LOGIN VARCHAR(255) NOT NULL,
	PASSWORD VARCHAR(255) NOT NULL,
	TELEPHONE VARCHAR(255) ,
	PRIMARY KEY (ID)
);

-- Tables for Entity Moderator 

DROP TABLE IF EXISTS MODERATOR;
CREATE TABLE MODERATOR
(
	FK_INHERITS_USER_ID CHAR(32) NOT NULL,
	PRIMARY KEY (FK_INHERITS_USER_ID)
);

